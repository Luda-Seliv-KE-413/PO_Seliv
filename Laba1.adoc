:toc: macro

:figure-caption: Рисунок

include::Titul_list_Laba1.adoc[]

toc::[]

---
[.text-left]
== Цель лабораторной работы
Знакомство со средой разработки IAR Embedded.

[.text-left]
== Задание 1
=== 1. Создать проект C++ c main.cpp

(Выполнено во время практического занятия 2)

=== 2. Подключить к проекту файл cstartup.cpp

(Выполнено во время практического занятия 3)

=== 3. Абстрактное программное обеспечение /Регистры /Значения файлов, Общие, Приложения, FreeRTOS

(Выполнено во время практического занятия 3)

=== 4. Создать структуру проекта в соотвествии со структурой папок

[#Финальная структура проекта]
.Финальная структура проекта
image::Финальная структура проекта.jpg[]

=== 5. Настроить STACK, HEAP



=== 6. Скопировать содержимое папки Registers и Common с проекта преподавателя в свою папку



=== 7. Написать программу в main.cpp



//Обычно размер стека вычисляется экспериментально и задается с небольшим запасом. Но также существуют правила задания размера стека:

//принято считать, что все локальные переменные создаются на стеке (хотя часть из них могут быть созданы и на регистрах);

//есть 16 регистров + регистры блока с плавающей точкой, которые должны быть сохранены на стеке;

//каждая вложенная подпрограмма должна сохранить на стеке все данные из пункта 1 и 2. То есть если вложенность будет 2, то и сохранять придется примерно в два раза больше данных;

//каждое прерывание должно сохранить данные из пункта 1 и 2.

//Чтобы задать размер стека и кучи, нужно нажав на правую кнопку мыши на проекте, выбрать Option⇒Linker и нажать кнопку Edit, далее выбрать закладку Stack/Heap Size (рисунок 2).

=== 8. Посмотреть видео: https://youtu.be/uC0jJGfDxtM

== Задание 2
=== 1. Откомпилировать и отлинковать программу

=== 2. Загрузить программу в симуляторе

=== 3. Сделать пошаговую отладку

=== 4. Настроить Debugger на отладку через StLink

=== 5. Подключить плату к компьютеру

=== 6. Загрузить программу в плату

=== 7. Выполнить пошаговую отладку

=== 8. Описать полученный результат

=== 9. Посмотреть видео: https://youtu.be/c7CasTJKw7o

== Задание 3
=== 1. Запустить анализатор стека. Узнать рекомендуемый размер стека.

=== 2. Изменить в проекте размер стека на рекомендуемый

=== 3. Создать map файл

=== 4. Описать что написано в map файле

=== 5. Поставить размер кучи HEAP в 0. Объяснить почему так можно сделать. И почему STACK нельзя

=== 6. Добавить проект в Git и сделать синхронизацию с GitHub

=== 7. Сделать отчет по каждому пункту каждого задания в файле .adoc. Выложить файл в GitHub

=== 8. Прислать ссылку на GitHub преподавателю для проверки

=== 9. Посмотреть видео: https://youtu.be/TajLTcjBgIg

== Выводы
[.text-left]
//Выводы по лабораторной работе

[.text-center]
== Ответы на контрольные вопросы
[.text-left]
// закоментировать или убрать, если таковых нет
